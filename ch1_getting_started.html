<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CARLsim: Chapter 1: Getting Started</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="CARLsimStyles.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CARLsim
   &#160;<span id="projectnumber">6.0.0</span>
   </div>
   <div id="projectbrief">CARLsim: a GPU-accelerated SNN simulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ch1_getting_started.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Chapter 1: Getting Started </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#ch1s1_preinstallation">1.1 Pre-Installation</a><ul><li class="level2"><a href="#ch1s1s1_os">1.1.1 Supported Operating Systems</a></li>
<li class="level2"><a href="#ch1s1s2_os">1.1.2 Source Directory Layout</a></li>
</ul>
</li>
<li class="level1"><a href="#ch1s2_installation">1.2 Installation</a><ul><li class="level2"><a href="#ch1s2s1_linux">1.2.1 Linux / Mac OS X</a><ul><li class="level3"><a href="#ch1s2s1s1_environment_variables">1.2.1.1 Environment Variables</a></li>
<li class="level3"><a href="#ch1s2s1s2_cuda_version">1.2.1.2 Finding CUDA Toolkit Version and Compute Capability</a></li>
<li class="level3"><a href="#ch1s2s1s3_localdev">1.2.1.3 Setup for local development</a></li>
<li class="level3"><a href="#ch1s2s1s4_ubuntu">1.2.1.4 Setup Ubuntu</a></li>
<li class="level3"><a href="#ch1s2s1s5_cmake">1.2.1.5 Setup CMake</a></li>
<li class="level3"><a href="#ch1s2s1s6_gtest">1.2.1.6 Setup Google Test</a></li>
</ul>
</li>
<li class="level2"><a href="#ch1s2s2_cmake">1.2.2 Build and Install with cMake</a></li>
<li class="level2"><a href="#ch1s2s2s1_cmake">1.2.2.1 Run CMake</a><ul><li class="level3"><a href="#ch1s2s2s2_advanced">1.2.2.2 Advanced installation for Linux</a></li>
<li class="level3"><a href="#ch1s2s2s3_validation">1.2.2.3 Validate the installation</a></li>
<li class="level3"><a href="#ch1s2s2s4_samples">1.2.2.4 Running the samples</a></li>
<li class="level3"><a href="#ch1s2s1s3_compiling">1.2.1.3 Compiling the CARLsim Library</a></li>
<li class="level3"><a href="#ch1s2s1s4_verifying">1.2.1.4 Verifying the Installation</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#ch1s3_project_workflow">1.3 Project Workflow</a><ul><li class="level2"><a href="#ch1s3s1_linux_project_workflow">1.3.1 Linux / Mac OS X</a><ul><li class="level3"><a href="#ch1s3s1s1_linux_hello_world_compile">1.3.1.1 Compiling and Running the &quot;Hello World&quot; Project in Linux / Mac OS X</a></li>
<li class="level3"><a href="#ch1s3s1s2_linux_create_new">1.3.1.2 Creating a New Project in Linux / Mac OS X</a></li>
</ul>
</li>
<li class="level2"><a href="#ch1s3s2_cmake_project_workflow">1.3.2 CMake</a><ul><li class="level3"><a href="#ch1s3s2s1_cmake_hello_world_compile">1.3.3.1 Compiling the &quot;Hello World&quot; Project using CMake</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#ch1s4_uninstallation">1.4 Uninstallation</a><ul><li class="level2"><a href="#ch1s4s1_linux">1.4.1 Linux / Mac OS X</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="ch1s1_preinstallation"></a>
1.1 Pre-Installation</h1>
<dl class="section author"><dt>Author</dt><dd>Kristofor D. Carlson </dd>
<dd>
Michael Beyeler </dd>
<dd>
Ting-Shuo Chou </dd>
<dd>
Lars Niedermeier</dd></dl>
<p><a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> runs on both generic x86 CPUs and off-the-shelf NVIDIA GPUs. Full support of all <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> features requires that the NVIDIA CUDA parallel computing platform be installed. It is also possible to compile <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> without GPU support (see <a class="el" href="ch1_getting_started.html#ch1s2s1s3_compiling">1.2.1.3 Compiling the CARLsim Library</a>).</p>
<p><a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> 6 requires GPUs with a compute capability of 5.0 (Maxwell) or higher. To find the compute capability of your device please refer to the <a href="http://en.wikipedia.org/wiki/CUDA" target="_blank"><b>CUDA article on Wikipedia</b></a>.</p>
<p><a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> also requires CUDA Toolkit 11.0 or higher. For platform-specific CUDA installation instructions, please navigate to the <a href="https://developer.nvidia.com/cuda-zone" target="_blank"><b>NVIDIA CUDA Zone</b></a>.</p>
<p>The rest of the chapter assumes you have successfully installed CUDA on appropriate hardware.</p>
<dl class="section note"><dt>Note</dt><dd>Please make sure you install the CUDA SDK samples, as <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> relies on the file <code>helper_cuda.h</code>, which usually resides in <code>/usr/local/cuda/samples/common/inc</code>.</dd></dl>
<h2><a class="anchor" id="ch1s1s1_os"></a>
1.1.1 Supported Operating Systems</h2>
<p><a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> has been tested primarily on the following platforms:</p><ul>
<li>Ubuntu 20.04 LTS</li>
<li>Windows 10 Professional, Windows 11 Education</li>
<li>CUDA 11.2, 11.4, 11.5, 11.7</li>
<li>GPUs: Titan Xp, 1080ti, RTX 3090, A100</li>
</ul>
<p>Due to the many possible combinations of operating systems, development stacks, CUDA versions, and GPUs, the <a href="https://github.com/UCI-CARL/CARLsim6/wiki/CARLsim6-Compatibility">GitHub wiki</a> lists those that were tested by the community as well.</p>
<h2><a class="anchor" id="ch1s1s2_os"></a>
1.1.2 Source Directory Layout</h2>
<p>Below is the directory layout of the <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> source code. All source code of the core library is contained in the directory <code>carlsim</code>. The sub-directories are key components to the <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> simulation library.</p>
<p>The <code>doc</code> directory contains doxygen-related source files in <code>source</code> and the pre-compiled HTML version of the documentation in <code>html</code>.</p>
<p>The <code>projects</code> directory contains a template for writing your first <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> program. Users will start here when they begin writing their first program.</p>
<p>The <code>tools</code> directory contains a number of <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> plugins that may be useful to users such as parameter tuning frameworks, MATLAB scripts, spike generators, and tools for visual stimuli.</p>
<div class="fragment"><div class="line">├── carlsim                       # <a class="code" href="classCARLsim.html">CARLsim</a> source code directory</div><div class="line">│   ├── <span class="keyword">interface                   </span># <a class="code" href="classCARLsim.html">CARLsim</a> interface (public user interface)</div><div class="line">│   ├── kernel                      # <a class="code" href="classCARLsim.html">CARLsim</a> core functionality</div><div class="line">│   ├── monitor                     # Monitors for groups, connections, spikes, etc.</div><div class="line">│   ├── server                      # Utility to implement real-time server functionality</div><div class="line">│   ├── test                        # Google test regression suite tests</div><div class="line">│   ├── test6                       # Google test suite for features of version 6</div><div class="line">│   └── testadv                     # Tests that are long running or require specific hardware</div><div class="line">├── doc                           # <a class="code" href="classCARLsim.html">CARLsim</a> documentation generation directory</div><div class="line">│   ├── html                        # Generated documentation in html</div><div class="line">│   └── source                      # Documentation source code</div><div class="line">├── external                      # External dependencies</div><div class="line">│   ├── googletest                  # Google Test framework</div><div class="line">├── projects                      # User projects directory</div><div class="line">│   └── hello_world                 # Project template for new users</div><div class="line">└── tools                         # <a class="code" href="classCARLsim.html">CARLsim</a> tools that are not built-in</div><div class="line">    ├── ecj_pti                     # Automated parameter-tuning interface using ECJ</div><div class="line">    ├── eo_pti                      # Automated parameter-tuning interface using EO (deprecated)</div><div class="line">    ├── offline_analysis_toolbox    # Collection of MATLAB scripts for data analysis</div><div class="line">    ├── simple_weight_tuner         # Simple weight parameter-tuning tool</div><div class="line">    ├── spike_generators            # Collection of input spike generation tools</div><div class="line">    └── visual_stimulus             # Collection of MATLAB/<a class="code" href="classCARLsim.html">CARLsim</a> tools for visual stimuli</div></div><!-- fragment --><dl class="section since"><dt>Since</dt><dd>v3.0</dd></dl>
<h1><a class="anchor" id="ch1s2_installation"></a>
1.2 Installation</h1>
<dl class="section author"><dt>Author</dt><dd>Kristofor D. Carlson </dd>
<dd>
Ting-Shuo Chou </dd>
<dd>
Michael Beyeler </dd>
<dd>
Lars Niedermeier</dd></dl>
<p><a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> is now available on <a href="https://github.com/UCI-CARL/CARLsim6">GitHub</a>.</p>
<p>If you are familiar with Git and GitHub, the preferred way to obtain the software is to fork and clone the GitHub repository. This will give you a way to access the latest stable and development versions of the code, and allow you to easily update your codebase later on.</p>
<p>This can be done in three steps:</p>
<ol type="1">
<li>Navigate to <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a>'s <a href="https://github.com/UCI-CARL/CARLsim6">GitHub page</a> and click on the <a href="https://github.com/UCI-CARL/CARLsim6#fork-destination-box"><code>Fork</code></a> box in the top-right corner.</li>
<li>Switch to a terminal (or <a href="https://desktop.github.com/">GitHub Desktop</a>) and clone the repository: <div class="fragment"><div class="line">$ git clone --recursive https:<span class="comment">//github.com/UCI-CARL/CARLsim6.git</span></div><div class="line">$ cd CARLsim6</div></div><!-- fragment --> where <code>YourUsername</code> is your GitHub user name. Note the <code>&ndash;recursive</code> option: It will make sure all external software dependencies get installed (e.g., Google Test).</li>
</ol>
<p>Alternatively, you may download the latest stable release from the <a href="https://github.com/UCI-CARL/CARLsim6/releases">GitHub Release</a> page (.zip or .tar.gz).</p>
<p>For installation instructions on Linux and Mac OS X platforms, please refer to <a class="el" href="ch1_getting_started.html#ch1s2s1_linux">1.2.1 Linux / Mac OS X</a> below. For installation instructions on any platform using CMake, refer to <a class="el" href="ch1_getting_started.html#ch1s2s2_cmake">1.2.2 Build and Install with cMake</a> below.</p>
<h2><a class="anchor" id="ch1s2s1_linux"></a>
1.2.1 Linux / Mac OS X</h2>
<p>Instructions for Linux/Mac OS X installation assume you are using the Bash shell. Additionally, the GNU GCC compiler collection and GNU Make build environment should be installed. On most platforms, these are already installed by default.</p>
<h3><a class="anchor" id="ch1s2s1s1_environment_variables"></a>
1.2.1.1 Environment Variables</h3>
<p><a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> 5 allows configuration via environment variables. The easiest way to set these is to add them to your <code>~/.bashrc</code> file.</p>
<p>The following options are available:</p>
<ul>
<li>Installation directory: By default, the <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> library lives in <code>~/CARL/lib</code>, and <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> include files live in <code>~/CARL/include</code>. You can overwrite these by exporting an evironment variable called <code>CARLSIM5_INSTALL_DIR</code>: <div class="fragment"><div class="line">$ export CARLSIM5_INSTALL_DIR=/path/to/your/preferred/location</div></div><!-- fragment --> For advanced users or administrators, you could set the path to <code>/usr/local</code></li>
<li>Custom CUDA paths: Set an environment variable called <code>CUDA_PATH</code>. By default, your CUDA library lives in <code>/usr/local/cuda</code> <div class="fragment"><div class="line">$ export CUDA_PATH=/path/to/CUDA</div></div><!-- fragment --></li>
<li>ECJ support: If you use the evolutionary computing based Parameter Tuning Interface, additional variables are needed. See ch10_ecj for the list of those additional variables.</li>
</ul>
<p>Once you have made changes to your <code>~/.bashrc</code>, make sure they go into effect by either typing: </p><div class="fragment"><div class="line">$ source ~/.bashrc</div></div><!-- fragment --><p> or by closing the shell and opening another one.</p>
<p>Older versions of <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> used a configuration file called <code>user.mk</code>. This file is obsolete as of <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> 3.1.2.</p>
<h3><a class="anchor" id="ch1s2s1s2_cuda_version"></a>
1.2.1.2 Finding CUDA Toolkit Version and Compute Capability</h3>
<p>The CUDA Toolkit version can be found via: </p><div class="fragment"><div class="line">$ nvcc --version</div></div><!-- fragment --><p> You need only input the major number of the toolkit version (e.g. 11 for 11.5).</p>
<p>The compute capability of the GPU device can be found by compiling the <code>deviceQuery</code> sample in the directory <code>1_Utilities</code> of the CUDA Toolkit. </p><div class="fragment"><div class="line"><span class="preprocessor"># copy NVIDIA Toolkit to home directory</span></div><div class="line">$ cd /usr/local/cuda/bin</div><div class="line">$ ./cuda-install-samples-11.0.sh ~</div><div class="line">$ cd ~/NVIDIA_CUDA-11.0_Samples/1_Utilities/deviceQuery</div><div class="line"></div><div class="line"><span class="preprocessor"># compile and run deviceQuery</span></div><div class="line">$ make</div><div class="line">$ ./deviceQuery</div></div><!-- fragment --><p> For CUDA Toolkits other than version 11.0, the paths above need to be changed accordingly.</p>
<dl class="section note"><dt>Note</dt><dd>Please make sure you install the CUDA SDK samples, as <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> relies on the file <code>helper_cuda.h</code>, which usually resides in <code>/usr/local/cuda/samples/common/inc</code>.</dd></dl>
<h3><a class="anchor" id="ch1s2s1s3_localdev"></a>
1.2.1.3 Setup for local development</h3>
<p>The following information are intended for developers using Linux. Usually the models and experiments are developed on a workstation having a NVIDIA GeForce and to be evaluated later on a supercomputer like the DGX A100. The following preliminaries are derived from the NVIDIA documentation for CUDA 11.5:</p><ol type="1">
<li>Linux: Ubuntu 20.04 LTS</li>
<li>CMake: 3.22</li>
<li>Google Test: 1.11</li>
</ol>
<p>In this guide, the following file structure is used as a reference for the local development. Please replace the placeholder user1 with the actual user name:</p>
<div class="fragment"><div class="line">/home/user1/</div><div class="line">  carlsim6/    # local installation CARLsim6</div><div class="line">      includes/</div><div class="line">      lib/</div><div class="line">      samples/</div><div class="line">  cmake-3.22/  # local installation of CMake</div><div class="line">      bin/</div><div class="line">      share/</div><div class="line">  gtest-1.11/  # local installation of Google Test</div><div class="line">      inclues/</div><div class="line">      lib/</div><div class="line">  git/         # cloned repositories from Github</div><div class="line">      CARLsim6/     </div><div class="line">      googletest/</div></div><!-- fragment --><h3><a class="anchor" id="ch1s2s1s4_ubuntu"></a>
1.2.1.4 Setup Ubuntu</h3>
<p>Ideally Ubuntu 20.04 LTS Desktop is installed from scratch on the workstation. For CUDA 11.5 please follow the official <a href="https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;Distribution=Ubuntu&amp;target_version=20.04&amp;target_type=deb_local">setup guide</a>. Also the user should be setup from scratch to avoid any side effects. While it is technically possible to use multiple CUDA and <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> versions side by side and switching between them utilizing some kind of <code>setenv.sh</code> script, such szenarios also depend strongly on the specific requirements and are therefore out of scope. A dedicated environment is furthermore essential to find the root cause of potential issues.</p>
<p>Prepare the .bashrc like the following (replace user1 with the actual user name).</p>
<div class="fragment"><div class="line">export PATH=/home/user1/cmake-3.22/bin${PATH:+:${PATH}}</div><div class="line">export LD_LIBRARY_PATH=/home/user1/gtest-1.11/lib${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}</div><div class="line">export LD_LIBRARY_PATH=/home/user1/carlsim6/lib${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}</div></div><!-- fragment --><p>Validate that the CUDA 11.5 installation has added the following lines:</p>
<div class="fragment"><div class="line">export PATH=/usr/local/cuda-11.5/bin${PATH:+:${PATH}}</div><div class="line">export LD_LIBRARY_PATH=/usr/local/cuda-11.5/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}</div></div><!-- fragment --><p>Install <em>pthreads</em> from the distribution: <code>sudo apt-get install libpthreads-dev</code></p>
<h3><a class="anchor" id="ch1s2s1s5_cmake"></a>
1.2.1.5 Setup CMake</h3>
<p>Download the latest binary (e.g. 3.22) from Kitware and install it to <code>/home/user1/CMake-3.22</code>.</p>
<p>Restart the terminal and validate the installation with <code>cmake --version</code>.</p>
<div class="fragment"><div class="line">$ cmake --version</div><div class="line">cmake version 3.22.0-rc2</div><div class="line">CMake suite maintained and supported by Kitware (kitware.com/cmake).</div></div><!-- fragment --><h3><a class="anchor" id="ch1s2s1s6_gtest"></a>
1.2.1.6 Setup Google Test</h3>
<p>Clone the latest stable version (e.g. 1.11) of <a href="https://github.com/google/googletest">Googletest at GitHub</a> and build it from source.</p>
<div class="fragment"><div class="line">cd ~/git</div><div class="line">git clone https:<span class="comment">//github.com/google/googletest.git</span></div><div class="line">cd googletest</div><div class="line">mkdir .build</div><div class="line">cd .build</div><div class="line">cmake -DCMAKE_INSTALL_PREFIX=/home/user1/gtest-1.11 -DBUILD_SHARED_LIBS=1 -DGTEST_HAS_PTHREAD=1 -DBUILD_GMOCK=OFF ../.</div><div class="line">make install</div></div><!-- fragment --><h2><a class="anchor" id="ch1s2s2_cmake"></a>
1.2.2 Build and Install with cMake</h2>
<p>Fast track for experienced users with cMake:</p>
<div class="fragment"><div class="line">cd ~/git</div><div class="line">git clone https:<span class="comment">//github.com/UCI-CARL/CARLsim6.git CARLsim6</span></div><div class="line">cd CARLsim6</div><div class="line">mkdir .build</div><div class="line">cd .build</div><div class="line">cmake -DCMAKE_INSTALL_PREFIX=/home/user1/carlsim6 -DCMAKE_BUILD_TYPE=Release ../.</div><div class="line">make install</div></div><!-- fragment --><p>First you run cMake to configure with what options <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> is to be built. Then the project files for the desired development environment of the platform are generated, e.g. gcc on Linux or Visual Studio on Windows. The configuration is stored in a cache file and can be either changed by the command line interface (CLI) or with platform independent graphical user interface <b>cmake-gui</b>.</p>
<div class="image">
<img src="cmake-gui.png" alt="cmake-gui.png"/>
<div class="caption">
Configure CARLsim 6 with CMake-GUI</div></div>
<p> Further information can be found at <a href="https://cmake.org/overview/">About CMake</a>.</p>
<h2><a class="anchor" id="ch1s2s2s1_cmake"></a>
1.2.2.1 Run CMake</h2>
<p>Create a build directory (you can make it anywhere)</p>
<div class="fragment"><div class="line">$ mkdir &lt;build-dir&gt;</div></div><!-- fragment --><p>Proceed into build directory and do configuration:</p>
<div class="fragment"><div class="line">$ cd &lt;build-dir&gt;</div><div class="line">$ cmake \</div><div class="line">    -DCMAKE_BUILD_TYPE=Release \</div><div class="line">    -DCMAKE_INSTALL_PREFIX=&lt;carlsim-install-dir&gt; \</div><div class="line">    -DCARLSIM_NO_CUDA=OFF \</div><div class="line">    &lt;carlsim-source-dir&gt;</div></div><!-- fragment --><p>As you can see <code>cmake</code> accepts several options <a href="https://cmake.org/cmake/help/v3.0/manual/cmake.1.html"><code>-D&lt;name&gt;=&lt;value&gt;</code></a>: they define cmake variables. <a href="https://cmake.org/cmake/help/v3.0/variable/CMAKE_BUILD_TYPE.html"><code>CMAKE_BUILD_TYPE</code></a> being assigned <code>Release</code>, which means that we are going to build release version of the library. If you need debug version then pass <code>Debug</code>. <a href="https://cmake.org/cmake/help/v3.0/variable/CMAKE_INSTALL_PREFIX.html"><code>CMAKE_INSTALL_PREFIX</code></a> specifies a directory which we are going to install the library into. <code>CARLSIM_NO_CUDA</code> switches on/off support of CUDA inside the library.</p>
<p>Build:</p>
<div class="fragment"><div class="line">$ cmake --build &lt;build-dir&gt;</div></div><!-- fragment --><p>Install:</p>
<div class="fragment"><div class="line">$ cmake --build &lt;build-dir&gt; --target install</div></div><!-- fragment --><p> Alternatively, the library can be built and installed from an IDE, in case you specified the IDE's <a href="https://cmake.org/cmake/help/v3.10/manual/cmake-generators.7.html">CMake Generator</a> during the configuration step.</p>
<h3><a class="anchor" id="ch1s2s2s2_advanced"></a>
1.2.2.2 Advanced installation for Linux</h3>
<div class="fragment"><div class="line">cd ~/git</div><div class="line">git clone --recursive https:<span class="comment">//github.com/UCI-CARL/CARLsim6.git CARLsim6</span></div><div class="line">cd CARLsim6</div><div class="line">mkdir .build</div><div class="line">cd .build</div><div class="line">cmake -DCMAKE_INSTALL_PREFIX=/home/user1/carlsim6 -DCMAKE_BUILD_TYPE=Release ../.</div><div class="line">make install</div></div><!-- fragment --><blockquote class="doxtable">
<p>Hint: If cmake does not find the <em>GTest_DIR</em> set it manually in cmake-gui to <code>/home/user1/gtest/lib/cmake/GTest</code>. Also, setting the following environment variables in Linux in ~/.bashrc may help (replace user1 with username): </p>
</blockquote>
<div class="fragment"><div class="line">export GTEST_LIBRARY=/home/user1/gtest-1.11/lib/libgtest.a</div><div class="line">export GTEST_MAIN_LIBRARY=/home/user1/gtest-1.11/lib/libgtest_main.a</div><div class="line">export GTEST_ROOT=/home/user1/gtest-1.11/</div></div><!-- fragment --><p>Follow the following sequence to repeat builds </p><div class="fragment"><div class="line">make clean</div><div class="line">make -j8</div><div class="line">make install</div></div><!-- fragment --><blockquote class="doxtable">
<p>Hint: The defaults for CMake are configured to support the latest version of CUDA and the current generation of GeForce graphics card (Ampere achritecture). Check which compute capability your your GPU actually has and adopt <em>CARLSIM_CUDA_GENCODE</em> accordingly either in <code>cmake-gui</code> or by passing it as a parameter to the CLI. E.g. for a Titan Xp the parameter is set by <code>-DCARLSIM_CUDA_GENCODE=-gencode arch=compute_61,code=sm_61</code> </p>
</blockquote>
<h3><a class="anchor" id="ch1s2s2s3_validation"></a>
1.2.2.3 Validate the installation</h3>
<p>Open a new terminal and validate the settings with <code>env</code>.</p>
<p>Start <code>~/carlsim6/samples/hello_world</code></p>
<p>Run the unit tests, e.g. </p><div class="fragment"><div class="line">cd ~/git/CARLsim6/.build/carlsim/test</div><div class="line">./carlsim-tests</div></div><!-- fragment --><p>To run all tests in parallel with monitoring the GPU utilization </p><div class="fragment"><div class="line">gnome-terminal -- /bin/sh -c <span class="stringliteral">&#39;~/git/CARLsim6/.build/carlsim/test/carlsim-tests;exec bash&#39;</span> &amp;</div><div class="line">gnome-terminal -- /bin/sh -c <span class="stringliteral">&#39;~/git/CARLsim6/.build/carlsim/test6/carlsim-tests6;exec bash&#39;</span> &amp;</div><div class="line">gnome-terminal -- /bin/sh -c <span class="stringliteral">&#39;~/git/CARLsim6/.build/carlsim/testadv/carlsim-testsadv --gtest_filter=-*GPU_MultiGPU*;exec bash&#39;</span> &amp;</div><div class="line">gnome-terminal -- /bin/sh -c <span class="stringliteral">&#39;nvidia-smi -l 1&#39;</span> &amp;</div></div><!-- fragment --><h3><a class="anchor" id="ch1s2s2s4_samples"></a>
1.2.2.4 Running the samples</h3>
<p>The executables of the samples are installed to $CMAKE_INSTALL_PREFIX/carlsim6/samples. Add the path to the .bashrc to repetitive start it from the bash. As most of the samples create a result directory or write other files, create a new working directory to capture the indiviual runs.</p>
<p>Alternatively the samples can be run directly from the build directory.</p>
<h3><a class="anchor" id="ch1s2s1s3_compiling"></a>
1.2.1.3 Compiling the CARLsim Library</h3>
<p>When it comes to compiling <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a>, you have several options:</p>
<ol type="1">
<li>Compile a <code>release</code> version: <div class="fragment"><div class="line">$ make -j4</div></div><!-- fragment --> or <div class="fragment"><div class="line">$ make release -j4</div></div><!-- fragment --> This will enable hardware accelerations using the <code>-O3</code> and <code>-ffast-math</code> compile flags.</li>
<li>Compile a <code>debug</code> version: <div class="fragment"><div class="line">$ make debug -j4</div></div><!-- fragment --> This will disable hardware accelerations (via <code>-O0</code>) and enable extensive debug prints (via <code>-g -Wall</code>).</li>
</ol>
<p>If your machine does not have a GPU card supporting CUDA framework, you could</p>
<ol type="1">
<li>Compile a <code>release</code> version without GPU support: <div class="fragment"><div class="line">$ make release_nocuda -j4</div></div><!-- fragment --></li>
<li>Compile a <code>debug</code> version without GPU support: <div class="fragment"><div class="line">$ make debug_nocuda -j4</div></div><!-- fragment --></li>
</ol>
<p>After compiling <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a>, you can install the library by typing:</p><ul>
<li><div class="fragment"><div class="line">$ make install</div></div><!-- fragment --> or</li>
<li><div class="fragment"><div class="line">$ sudo -E make install</div></div><!-- fragment --> , if you are an administrator.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Note the <code>-E</code> flag in the commands above, which will cause <code>sudo</code> to remember any environment variables you set above (such as <code>CARLSIM5_INSTALL_DIR</code>). You don't need this flag if you're not installing with <code>sudo</code>.</dd>
<dd>
Also, note the <code>-j4</code> flag, which will install <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> using four workers. You can increase the number on systems with more than four cores if you wish, or omit the flag if you're working on a single-core machine.</dd></dl>
<p><a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> comes with an optional automated parameter tuning framework. For more information about how to install the framework please see ch10_ecj. Additionally, <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> now comes with a regression suite that uses <a href="https://code.google.com/p/googletest/">Google Test</a>. For more information on how to use the regression suite, please see <a class="el" href="ch11_regression_suite.html">Chapter 11: Regression Suite</a>.</p>
<dl class="section since"><dt>Since</dt><dd>v3.1</dd></dl>
<h3><a class="anchor" id="ch1s2s1s4_verifying"></a>
1.2.1.4 Verifying the Installation</h3>
<p>In order to make sure the installation was successful, you can compile the regression suite:</p>
<div class="fragment"><div class="line">$ make test</div></div><!-- fragment --><p> or </p><div class="fragment"><div class="line">$ make test_nocuda</div></div><!-- fragment --><p> , if you compiled <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> libarary without GPU support.</p>
<p>To run the regression suite, you can type: </p><div class="fragment"><div class="line">$ ./carlsim/test/carlsim_tests</div></div><!-- fragment --><p>For more information on the regression suite, please refer to <a class="el" href="ch11_regression_suite.html">Chapter 11: Regression Suite</a>.</p>
<h1><a class="anchor" id="ch1s3_project_workflow"></a>
1.3 Project Workflow</h1>
<dl class="section author"><dt>Author</dt><dd>Kristofor D. Carlson </dd>
<dd>
Ting-Shuo Chou</dd></dl>
<p>A sample "Hello World" project is provided in the <code>projects/hello_world</code> directory. The project includes a single source file <code>main_hello_world.cpp</code> in the <code>src</code> directory that creates a network with two groups, connected with random weights, and can be used as a skeleton to create new projects.</p>
<p>Any output files created by the simulation will be automatically placed in the <code>results/</code> directory.</p>
<p>All MATLAB scripts should be placed in the <code>scripts/</code> directory. This directory already contains two MATLAB scripts to aid in using the OAT (see <a class="el" href="ch9_matlab_oat.html">Chapter 9: MATLAB Offline Analysis Toolbox (OAT)</a>). The script <code>initOAT.m</code> adds the OAT directory to the MATLAB path, whereas <code>demoOAT.m</code> will open a NetworkMonitor to visualize network activity. Note that for <code>demoOAT.m</code> to work, the executable must be run first (see <a class="el" href="ch1_getting_started.html#ch1s3s1s1_linux_hello_world_compile">1.3.1.1 Compiling and Running the "Hello World" Project in Linux / Mac OS X</a> below). In order to run the OAT, open MATLAB, change to <code>projects/hello_world/scripts/</code>, then type: </p><div class="fragment"><div class="line">&gt;&gt; initOAT     % adds OAT relative path to MATLAB paths</div><div class="line">&gt;&gt; demoOAT     % opens a NetworkMonitor on the simulation file</div></div><!-- fragment --><h2><a class="anchor" id="ch1s3s1_linux_project_workflow"></a>
1.3.1 Linux / Mac OS X</h2>
<h3><a class="anchor" id="ch1s3s1s1_linux_hello_world_compile"></a>
1.3.1.1 Compiling and Running the "Hello World" Project in Linux / Mac OS X</h3>
<p>The "Hello World" project comes with its own Makefile that compiles the file <code>main_hello_world.cpp</code> and links it with the <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> library. The project can be compiled and run with the following set of commands: </p><div class="fragment"><div class="line">$ cd projects/hello_world</div><div class="line">$ make</div><div class="line">$ ./hello_world</div></div><!-- fragment --><p> If you compile <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> library without GPU support, please build your project by typing: </p><div class="fragment"><div class="line">$ make nocuda</div></div><!-- fragment --><p>Any output files created by the simulation will be automatically placed in the <code>results/</code> directory. This may include any spike files created by <a class="el" href="classSpikeMonitor.html" title="Class SpikeMonitor. ">SpikeMonitor</a>, a debug log file, and a network structure file.</p>
<p>All local objects and executables can be deleted via: </p><div class="fragment"><div class="line">$ make clean</div></div><!-- fragment --><p>All output files, including local objects, executables, and files in the <code>results/</code> directory can be deleted via: </p><div class="fragment"><div class="line">$ make distclean</div></div><!-- fragment --><dl class="section warning"><dt>Warning</dt><dd>When <code>make distclean</code> is called, all data files in the results directory will be deleted!</dd></dl>
<h3><a class="anchor" id="ch1s3s1s2_linux_create_new"></a>
1.3.1.2 Creating a New Project in Linux / Mac OS X</h3>
<p>The easiest way to create a new project in Linux/Mac OS X is to make a copy of the <code>projects/hello_world/</code> directory and all its corresponding subdirectories, rename the directory accordingly, and place it alongside <code>hello_world/</code> in the <code>projects/</code> directory. To do this, type </p><div class="fragment"><div class="line">$ ./init.sh your_project_name</div></div><!-- fragment --><p>Only minimal changes to the Makefile must be made in order for the project to compile correctly. The Makefile provided in the directory was made so that users only have to modify a small portion of the file to build a custom project. Below is the modifiable portion of the Makefile: </p><div class="fragment"><div class="line"><span class="preprocessor"># Name of the binary file to be created.</span></div><div class="line"><span class="preprocessor"># NOTE: There must be a corresponding .cpp file named main_$(proj_target).cpp</span></div><div class="line">proj_target := hello_world</div><div class="line"></div><div class="line"><span class="preprocessor"># Directory where all include files reside. The Makefile will automatically</span></div><div class="line"><span class="preprocessor"># detect and include all .h files within that directory.</span></div><div class="line">proj_inc_dir := inc</div><div class="line"></div><div class="line"><span class="preprocessor"># Directory where all source files reside. The Makefile will automatically</span></div><div class="line"><span class="preprocessor"># detect and include all .cpp and .cu files within that directory.</span></div><div class="line"><span class="preprocessor">proj_src_dir := src</span></div></div><!-- fragment --><p>The name of the project can be changed via variable <code>project</code>. Whatever string is assigned here will influence the name of the Makefile target as well as the name of the C++ source file. For example, setting <code>project</code> to "hello_world" will assume that a source file <code>main_hello_world.cpp</code> exists, and will create an executable called <code>hello_world</code>.</p>
<dl class="section note"><dt>Note</dt><dd>The C++ source file must be named <code>main_{project name}.cpp</code> for the Makefile to compile correctly, where <code>{project_name}</code> is the string assigned to the <code>project</code> variable in the Makefile.</dd></dl>
<h2><a class="anchor" id="ch1s3s2_cmake_project_workflow"></a>
1.3.2 CMake</h2>
<h3><a class="anchor" id="ch1s3s2s1_cmake_hello_world_compile"></a>
1.3.3.1 Compiling the "Hello World" Project using CMake</h3>
<p>Make sure that <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> has been <a class="el" href="ch1_getting_started.html#ch1s2s2_cmake">built and installed using CMake</a>, because the "Hello World" project's cmake script searches for <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a>'s cmake package configuration file.</p>
<p>Create a build directory (you can make it anywhere)</p>
<div class="fragment"><div class="line">$ mkdir &lt;build-dir&gt;</div></div><!-- fragment --><p>Proceed into the build directory and do configuration:</p>
<div class="fragment"><div class="line">$ cd &lt;build-dir&gt;</div><div class="line">$ cmake \</div><div class="line">    -DCMAKE_BUILD_TYPE=Release \</div><div class="line">    -DCMAKE_PREFIX_PATH=&lt;carlsim-install-dir&gt; \</div><div class="line">    &lt;hello-world-source-dir&gt;</div></div><!-- fragment --><p><a href="https://cmake.org/cmake/help/v3.0/variable/CMAKE_BUILD_TYPE.html"><code>CMAKE_BUILD_TYPE</code></a> specifies whether we build Release of Debug version of the project. <a href="https://cmake.org/cmake/help/v3.0/variable/CMAKE_PREFIX_PATH.html"><code>CMAKE_PREFIX_PATH</code></a> must point to the <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a>'s installation directory in case we installed the library into a cutsom directory, so that cmake can find its configuration file. <code>&lt;hello-world-source-dir&gt;</code> must point to the directory holding the project's <code>CMakeLists.txt</code> file.</p>
<p>Build the project:</p>
<div class="fragment"><div class="line">$ cmake --build &lt;build-dir&gt;</div></div><!-- fragment --><p>Alternatively, the project can be built from an IDE, in case you specified the IDE's <a href="https://cmake.org/cmake/help/v3.10/manual/cmake-generators.7.html">CMake Generator</a> during the configuration step.</p>
<h1><a class="anchor" id="ch1s4_uninstallation"></a>
1.4 Uninstallation</h1>
<dl class="section author"><dt>Author</dt><dd>Michael Beyeler</dd></dl>
<h2><a class="anchor" id="ch1s4s1_linux"></a>
1.4.1 Linux / Mac OS X</h2>
<p>To uninstall <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> on a Unix platform, open a terminal, simply remove the installed library and header files in <code>CARLSIM5_INSTALL_DIR</code></p>
<dl class="section note"><dt>Note</dt><dd>Any environments that have been added to <code>~/.bashrc</code> must be removed manually. </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Jul 14 2022 18:14:01 for CARLsim by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
